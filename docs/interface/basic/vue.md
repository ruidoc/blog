# Vue 面试题

## Vue 组件的渲染流程

1. 组件实例化，初始化 data，methods，computed 等。
2. 解析模版，转换为渲染函数。
3. 首次渲染，执行渲染函数，创建虚拟 DOM。
4. 生成真实 DOM，页面渲染完毕。
5. 更新时，创建虚拟 DOM，与旧的虚拟 DOM 做对比（diff）
6. 发生变化的部分，进行最小 DOM 更新。
7. 卸载时，销毁实例，删除 DOM。

## Vue3 响应式系统的升级

1. 用 `Proxy` 替代 `Object.defineProperty`。

Object.defineProperty 有局限性，不能监听`对象属性`和`数组元素`的新增和删除（直接修改），需要依靠 `$set` 方法来手动添加响应式。

2. 更加细粒度的依赖追踪。

Proxy 只在属性变化的时候会响应，比 Object.defineProperty 的精准度更高。

3. 对 TypeScript 的支持更加友好。

4. 组合式函数，可以将组件与状态分离，状态独立存在（全局状态管理）。

# nextTick() 的作用

在修改状态之后，希望等到真实 DOM 渲染之后再执行，客户获取到渲染后的 DOM。

## Vue 和 React 的区别：

### 1. diff 的区别

Vue 和 React 的 diff 算法都是进行`同层比较`。

类型相同、className 不同的单节点比对：

- React：认为是同一节点，修改属性。
- Vue：认为是不同节点，删除重建。

列表比对：

- React：首尾指针法，从左到右依次比对。
- Vue：双端比对，效率更高。

### 2. 数据驱动的概念差异

React：

- 思想：单向数据流。
- 不可变数据。
- 手动修改状态（setState）后触发重新渲染。

Vue:

- 思想：双向数据绑定。
- 响应式系统（Proxy）。
- 自动追踪数据变化，并自动更新对应视图（不重新渲染）。

### 3. 更新流程差异

Vue：应用的状态被改变时，响应式系统可以跟踪子组件变化的部分（diff 更快），不需要重新渲染整个组件树。

React：应用的状态被改变时，全部子组件都会重新渲染。

注意：Vue 通常只对发生变化的部分进行更新，这意味着它只会生成那些需要更新的部分的新虚拟 DOM 树，而不是整个应用的树。而 React 会生成完整的虚拟 DOM 树。
