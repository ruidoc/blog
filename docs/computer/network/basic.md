# 计算机网络

计算机网络是开发过程中绕不开的知识点，也是大多数非科班程序员的薄弱点。计算机网络决定了设备之间如何联通，当联通失败时，如何从网络层面判断失败原因。

计算机网络的基础知识包括 IP 地址、子网掩码、路由地址、路由表、网关等，本节我们一一搞清楚。

## 1. IP 地址

IP 地址是一台设备在网络中的身份证，有了 IP 地址才能上网，该地址在网络中是唯一的。

这里说的网络，包括局域网和公网，因此 IP 地址也分为`内网IP`和`公网IP`。内网 IP 在内网中是唯一的，同一内网中的多个设备可以通过 IP 地址互相访问；而公网 IP 则是在全球互联网中唯一，客户端的公网 IP 一般不可见。

那么 IP 地址是如何组成的呢？

从结构上看，IP 地址由圆点分隔的四个十进制数字表示，每个数字范围从 0 到 255。如某一台主机的 IP 地址为 **123.29.30.51**，这就是个标准的 IP 地址。

从网络组成方面看，**IP 地址=网络地址+主机地址**（网络号+主机号），我们看一个例子：

- 网络地址：123.29.30.0
- 主机地址：0.0.0.51
- IP 地址：网络地址+主机地址 = 123.29.30.51
- 广播地址：123.29.30.255

广播地址等于网络地址+最后一个主机地址，因此它的主机号为 0.0.0.255。

两个设备能否互相连通，关键在于它们在不在同一个网络（即网络地址是否相同），在就能通，不在就不能通。当然主机号不能相同，否则 IP 地址就重复了。

## 子网掩码

子网掩码的作用，就是从 IP 地址中计算出正确的网络地址。

这里要明确一件事：网络地址是不能通过 IP 地址直接判断出来的。比如一个公网 IP 地址是 122.3.56.10，那么网络地址可能是 122.0.0.0，也可能是 122.3.0.0，或者是其他。此时就要用子网掩码来计算网络地址。

计算规则是二进制对比，比较麻烦，我们可以借助[在线工具](https://www.sojson.com/convert/subnetmask.html)输入 IP 地址和子网掩码拿到网络地址和可用的网段。

子网掩码可以通过“掩码位”来生成，对应关系如下：

- 8 个掩码位：255.0.0.0
- 16 个掩码位：255.255.0.0
- 24 个掩码位：255.255.255.0
- 32 个掩码位：255.255.255.255

如果掩码位不是 8 的倍数，可能还要借助上面的工具计算，比如：

- 10 个掩码位：255.192.0.0
- 20 个掩码位：255.255.240.0

## 路由地址
